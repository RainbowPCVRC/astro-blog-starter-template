---
import BaseLayout from "../layouts/BaseLayout.astro";
import { SITE_TITLE, LINKS } from "../consts";

// Put your product images in: /public/images/products/
// Example filenames below — swap to your real filenames.
const gumroadImage = "/images/products/lumistera-leg-warmers.jpg";
const jinxxyImage = "/images/products/jinxxy-preview.jpg";
---

<BaseLayout title={`${SITE_TITLE} • Products`} description="Store links + featured products.">
  <main class="page-shell">
    <header class="page-head neon-card proximity-glow">
      <div class="glow-spot"></div>
      <h1>Products</h1>
      <p>
        If you want quality products for a decent price, then go to my
        <a class="underline-soft" href={LINKS.gumroad} target="_blank" rel="noreferrer"> Gumroad</a>
        <span> &amp; </span>
        <a class="underline-soft" href={LINKS.jinxxy} target="_blank" rel="noreferrer">Jinxxy</a>
        <span> links!</span>
      </p>
    </header>

    <section class="store-row">
      <article class="neon-card proximity-glow store-card">
        <div class="glow-spot"></div>

        <div class="store-top">
          <div class="store-icon">
            <img class="icon-img" src="/icons/jinxxy.svg" alt="" />
          </div>

          <div>
            <h2 class="store-title">Jinxxy Store Link</h2>
            <a class="store-cta" href={LINKS.jinxxy} target="_blank" rel="noreferrer">
              Go to Store Page! <span class="arrow">→</span>
            </a>
          </div>
        </div>

        <button class="img-btn" data-img={jinxxyImage} data-alt="Jinxxy product preview">
          <img class="store-img" src={jinxxyImage} alt="Jinxxy product preview" loading="lazy" />
        </button>
      </article>

      <div class="ampersand">&amp;</div>

      <article class="neon-card proximity-glow store-card">
        <div class="glow-spot"></div>

        <div class="store-top">
          <div class="store-icon">
            <img class="icon-img" src="/icons/gumroad.svg" alt="" />
          </div>

          <div>
            <h2 class="store-title">Gumroad Store Link</h2>
            <a class="store-cta" href={LINKS.gumroad} target="_blank" rel="noreferrer">
              Go to Store Page! <span class="arrow">→</span>
            </a>
          </div>
        </div>

        <button class="img-btn" data-img={gumroadImage} data-alt="Gumroad product preview">
          <img class="store-img" src={gumroadImage} alt="Gumroad product preview" loading="lazy" />
        </button>
      </article>
    </section>

    <section class="neon-card proximity-glow" style="margin-top: 1rem;">
      <div class="glow-spot"></div>
      <div class="store-top" style="justify-content:space-between;">
        <div>
          <h2 style="margin:0;">Support</h2>
          <p style="margin:.45rem 0 0; opacity:.9;">
            If you want to support and make RainbowVis's dreams come true, then consider supporting them on their Ko-Fi!
            There is memberships affordable for everyone! And the benefits are very great!
          </p>

          <a class="store-cta" href={LINKS.kofi} target="_blank" rel="noreferrer" style="margin-top:.65rem; display:inline-flex;">
            Go support RainbowVis if you want! <span class="arrow">→</span>
          </a>
        </div>

        <div class="store-icon" style="align-self:flex-start;">
          <img class="icon-img" src="/icons/kofi.svg" alt="" />
        </div>
      </div>
    </section>

    <!-- Image Modal -->
    <div class="img-modal" aria-hidden="true" id="imgModal">
      <div class="img-modal-backdrop" data-close="true"></div>
      <div class="img-modal-content neon-card">
        <button class="img-modal-close" type="button" data-close="true">✕</button>
        <img id="imgModalImg" src="" alt="" />
      </div>
    </div>

    <script>
      const modal = document.getElementById("imgModal");
      const modalImg = document.getElementById("imgModalImg");

      function openModal(src, alt){
        modal.setAttribute("aria-hidden","false");
        modalImg.src = src;
        modalImg.alt = alt || "Preview image";
      }
      function closeModal(){
        modal.setAttribute("aria-hidden","true");
        modalImg.src = "";
        modalImg.alt = "";
      }

      document.querySelectorAll(".img-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const src = btn.getAttribute("data-img");
          const alt = btn.getAttribute("data-alt");
          if (src) openModal(src, alt);
        });
      });

      modal.addEventListener("click", (e) => {
        const t = e.target;
        if (t && t.getAttribute && t.getAttribute("data-close") === "true") closeModal();
      });

      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });
    </script>

    <style>
      /* smaller than before */
      .store-img{ max-height: 180px; }
      .store-card{ padding: .85rem; }
      .store-title{ font-size: 1rem; }
    </style>
  </main>
</BaseLayout>
