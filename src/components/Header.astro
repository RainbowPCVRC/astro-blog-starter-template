---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE, LINKS } from "../consts";
---

<header class="site-header">
  <nav class="nav">
    <h2 class="brand">
      <a href="/" class="brand-link">
        <img class="brand-icon" src="/RainbowsCreationsIcon.svg" alt="Rainbow's Creations icon" loading="eager" />
        <span class="brand-text">{SITE_TITLE}</span>
      </a>
    </h2>

    <div class="internal-links" aria-label="Main navigation">
      <span class="divider">|</span><HeaderLink href="/">Home</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/about">About</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/gallery">Gallery</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/products">Products</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/commissions">Commissions</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/wips">W.I.P's</HeaderLink>
      <span class="divider">|</span><HeaderLink href="/contact">Contacts</HeaderLink>
      <span class="divider">|</span>
    </div>

    <div class="social-links" aria-label="Social links">
      <!-- Icon helper pattern: img + fallback span -->
      <a class="icon-link" href={LINKS.bluesky} target="_blank" rel="noreferrer" aria-label="Bluesky">
        <img class="icon-img" src="/icons/bluesky.svg" alt="" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';" />
        <span class="icon-fallback">ü¶ã</span>
      </a>

      <a class="icon-link" href={LINKS.twitter} target="_blank" rel="noreferrer" aria-label="Twitter / X">
        <img class="icon-img" src="/icons/twitter.svg" alt="" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';" />
        <span class="icon-fallback">ùïè</span>
      </a>

      <a class="icon-link" href={LINKS.youtube} target="_blank" rel="noreferrer" aria-label="YouTube">
        <img class="icon-img" src="/icons/youtube.svg" alt="" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';" />
        <span class="icon-fallback">‚ñ∂</span>
      </a>

      <a class="icon-link" href={LINKS.twitch} target="_blank" rel="noreferrer" aria-label="Twitch">
        <img class="icon-img" src="/icons/twitch.svg" alt="" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';" />
        <span class="icon-fallback">‚åÅ</span>
      </a>

      <a class="icon-link" href={LINKS.discordInvite} target="_blank" rel="noreferrer" aria-label="Discord">
        <img class="icon-img" src="/icons/discord.svg" alt="" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';" />
        <span class="icon-fallback">‚åó</span>
      </a>
    </div>
  </nav>

  <style>
    .site-header{
      padding: 0 .9rem;
      background: rgba(10, 6, 18, 0.55);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 1rem;
      min-height: 52px;
    }

    .brand{ margin:0; font-size: 1rem; }
    .brand-link{
      display:flex;
      align-items:center;
      gap: .55rem;
      text-decoration:none;
      border-bottom:none;
      opacity:.98;
    }
    .brand-text{
      font-family: "StarsHeader", system-ui, sans-serif;
      letter-spacing: 0.02em;
      font-size: 1.08rem;
      text-shadow: 0 0 12px rgba(180,120,255,0.20);
    }
    .brand-icon{
      width: 26px;
      height: 26px;
      display:block;
      filter: drop-shadow(0 0 10px rgba(180,120,255,0.22));
    }

    .internal-links{
      display:flex;
      align-items:center;
      gap: .25rem;
      opacity: .95;
      padding: .25rem .25rem;
      border-radius: 14px;
      background: rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.06);
    }

    .divider{
      color: rgba(255,255,255,0.25);
      padding: 0 .1rem;
      user-select:none;
    }

    .social-links{
      display:flex;
      gap: .65rem;
      align-items:center;
    }
    .icon-link{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width: 32px;
      height: 32px;
      border-radius: 10px;
      text-decoration:none;
      border: none;
      background: transparent;
      opacity: .88;
      transition: opacity .15s ease, transform .15s ease, background .15s ease, box-shadow .15s ease;
    }
    .icon-link:hover{
      opacity: 1;
      transform: translateY(-1px);
      background: rgba(255,255,255,0.04);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.08), 0 0 18px rgba(180,120,255,0.18);
    }
    .icon-link :global(.icon-img){
      width: 18px; height: 18px;
    }
    .icon-link :global(.icon-fallback){
      display:none;
      width: 18px; height: 18px;
      align-items:center; justify-content:center;
      font-size: 14px;
    }

    @media (max-width: 980px){
      .social-links{ display:none; }
    }
    @media (max-width: 820px){
      .internal-links{ display:none; }
    }
  </style>
</header>
